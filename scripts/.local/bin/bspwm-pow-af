#!/usr/bin/env sh

# bspwm-pow-af : auto-focus previous occupied workspace
# Source: https://www.reddit.com/r/bspwm/comments/hh975q/share_your_favorite_bspwmsxhkd_tips_and_tricks

bspc subscribe node_remove | while read -r _; do
    if [ -z "$(bspc query -N -n .local.focused)" ]; then
    for win in $(bspc query -N -n .leaf.local.!window); do
        bspc node $win -k
    done
    bspc desktop -f last.occupied
    fi
done
